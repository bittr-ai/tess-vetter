# Architecture Review Follow-up (2026-01-11)

This is a short follow-up to `working_docs/architecture_review/README.md`, reflecting recent
architecture decisions and identifying the next highest-priority improvements.

## Current State (Soundness Check)

The repo is broadly architecturally sound for its intended role (metrics-only, domain library):

- **Single first-class public surface:** `bittr_tess_vetter.api`
- **Import-time hygiene:** lazy exports in `api/__init__.py` (large surface, but avoids eager heavy imports)
- **Boundary clarity:** platform concerns live under `bittr_tess_vetter.platform/*`
- **Metrics-only invariant:** public API wrappers consistently force metrics-only outputs and do not
  embed interpretation/policy (that belongs in `astro-arc-tess/src/astro_arc/validation`)

## Next Highest-Priority Improvements (P0/P1)

### P0 — API cohesion around naming

There are a few naming collisions/near-collisions that are easy for advanced users to trip over:

- `api/catalog.py` (catalog *checks* V06–V07) vs `api/catalogs.py` (catalog *clients* + offline fixtures)
- Similar patterns exist for other areas where “checks/orchestration” and “client/helpers” are adjacent.

Recommended approach (non-breaking):
- Keep both modules as-is (since the full surface is first-class and stable).
- Add/expand top-level **aliases** where it materially improves ergonomics without creating ambiguity.
- Optionally (later) introduce additional “namespaced” top-level exports (e.g. `catalog_checks_*`) only
  if ambiguity becomes a repeated support cost.

### P0 — Remove confusing remnants from the transition

- The recently removed `api.facade` left behind a test file name that implies a facade still exists.
  This is minor but creates contributor confusion.

### P1 — Export-surface governance

Given the “full surface is first class” decision, the main maintenance risk is accidental churn:

- Add targeted tests that:
  - ensure key aliases exist and resolve to the same objects,
  - ensure metrics-only invariants remain true at the API boundary.
- Avoid trying to freeze the entire `__all__` list as a snapshot unless you’re prepared for high friction.

